The following SQL query attempts to use the aggregate function AVG() with a WHERE clause that filters the data based on a subquery. However, the subquery itself contains an aggregate function (MAX()) which returns a single value rather than a set of rows.  This causes the query to fail, or return incorrect results, because the WHERE clause expects a set of rows to compare against, but it receives only a single value.